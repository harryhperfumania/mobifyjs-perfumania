var Mobify=window.Mobify=window.Mobify||{};Mobify.$=Mobify.$||window.Zepto||window.jQuery,Mobify.UI=Mobify.UI||{},function(e,t){e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in t})}(Mobify.$,document),Mobify.UI.Utils=function(e){function r(){if(/iPhone\ OS\ 3_1/.test(navigator.userAgent))return undefined;var e=document.createElement("fakeelement"),t={transition:"transitionEnd transitionend",OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n;for(n in t)if(e.style[n]!==undefined)return t[n];return}var t={},n=e.support;return t.events=n.touch?{down:"touchstart",move:"touchmove",up:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup"},t.getCursorPosition=n.touch?function(e){return e=e.originalEvent||e,{x:e.touches[0].clientX,y:e.touches[0].clientY}}:function(e){return{x:e.clientX,y:e.clientY}},t.getProperty=function(e){var t=["Webkit","Moz","O","ms",""],n=document.createElement("div").style;for(var r=0;r<t.length;++r)if(n[t[r]+e]!==undefined)return t[r]+e;return},e.extend(t.events,{transitionend:r()}),t}(Mobify.$),Mobify.UI.Accordion=function(e,t){var n=e.support,r=function(t){this.element=t,this.$element=e(t),this.dragRadius=10,this.bind()};return r.prototype.bind=function(){function o(){var t=e(this).parent();t.hasClass("m-closed")&&e(this).parent().removeClass("m-active");var r=0;e(".m-item",n).each(function(t){var n=e(this);r+=n.height()})}function u(e){e.removeClass("m-opened"),e.addClass("m-closed"),t.events.transitionend||e.removeClass("m-active"),e.find(".m-content").css("max-height",0)}function a(e){var t=e.find(".m-content");e.addClass("m-active"),e.removeClass("m-closed"),e.addClass("m-opened");var n=t.children(),r="outerHeight"in n?n.outerHeight():n.height();t.css("max-height",r*1.5+"px")}function f(e){r=t.getCursorPosition(e)}function l(e){i=t.getCursorPosition(e)}function c(t){if(i){dx=r.x-i.x,dy=r.y-i.y,i=undefined;if(dx*dx+dy*dy>s*s)return}var n=e(this).parent();n.hasClass("m-active")?u(n):a(n)}function h(e){e.preventDefault()}var n=this.$element,r,i,s=this.dragRadius,p=location.hash,d=n.find('.m-header a[href="'+p+'"]');d.length&&a(d.parent()),n.find(".m-header").on(t.events.down,f).on(t.events.move,l).on(t.events.up,c).on("click",h),t.events.transitionend&&n.find(".m-content").on(t.events.transitionend,o)},r.prototype.unbind=function(){this.$element.off()},r.prototype.destroy=function(){this.unbind(),this.$element.remove(),this.$element=null},r}(Mobify.$,Mobify.UI.Utils),function(e){e.fn.accordion=function(t){return this.each(function(){var n=e(this),r=n._accordion;r||(r=new Mobify.UI.Accordion(this)),t&&(r[t](),t==="destroy"&&(r=null)),n._accordion=r}),this}}(Mobify.$)